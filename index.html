<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>TikTok</title>

<style>
:root{
  --bg:#0f0f0f;
  --card:#1c1c1e;
  --pink:#ff0050;
  --text:#fff;
  --muted:#9b9b9b;
}

*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto}
body{
  margin:0;background:black;color:var(--text);
  display:flex;justify-content:center;
  padding-top:env(safe-area-inset-top);
  padding-bottom:env(safe-area-inset-bottom);
}

.video-bg{
  position:fixed;inset:0;
  background:linear-gradient(180deg,#141414,#000);
  animation:bg 10s infinite alternate;
  z-index:-1;
}
@keyframes bg{from{filter:brightness(.9)}to{filter:brightness(1.1)}}

.app{width:100%;max-width:420px;min-height:100vh;padding:16px}
.header{text-align:center;font-weight:700;font-size:22px;margin:8px 0 16px}
.card{background:var(--card);border-radius:20px;padding:18px}

.user{display:flex;gap:12px;align-items:center}
.avatar{
  width:48px;height:48px;border-radius:50%;
  background:#333;display:flex;align-items:center;justify-content:center;
  font-weight:800;font-size:18px
}
.user input{
  flex:1;background:#2a2a2c;border:none;color:white;
  padding:12px;border-radius:12px;font-size:15px
}

.balance{text-align:center;margin:26px 0}
.balance .coins{font-size:38px;font-weight:900}
.balance span{color:var(--muted);font-size:14px}

.packages{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.pkg{
  background:#2a2a2c;border-radius:16px;padding:14px;
  text-align:center;cursor:pointer;transition:.15s
}
.pkg:active{transform:scale(.96)}
.pkg strong{display:block;font-size:18px}
.pkg span{color:var(--muted);font-size:13px}

/* Historial */
.history{
  margin-top:16px;border-top:1px solid #2a2a2c;padding-top:10px
}
.history h4{margin:0 0 6px;font-size:13px;color:var(--muted)}
.item{display:flex;justify-content:space-between;font-size:14px;padding:4px 0}

/* Modales */
.overlay{
  position:fixed;inset:0;background:rgba(0,0,0,.6);
  display:flex;align-items:center;justify-content:center
}
.modal{
  background:#1c1c1e;border-radius:20px;padding:22px;width:260px;text-align:center
}
.modal button{
  width:100%;margin-top:10px;padding:12px;
  border:none;border-radius:12px;font-size:15px
}
.confirm{background:var(--pink);color:white}
.cancel{background:#2a2a2c;color:white}

.check{
  width:90px;height:90px;border-radius:50%;
  background:var(--pink);margin:0 auto 14px;
  display:flex;align-items:center;justify-content:center;
  font-size:44px;font-weight:900
}
</style>
</head>

<body>
<div class="video-bg"></div>

<div class="app">
  <div class="header">TikTok</div>

  <div class="card">
    <div class="user">
      <div class="avatar" id="avatar">U</div>
      <input id="user" placeholder="@usuario" oninput="setAvatar()">
    </div>

    <div class="balance">
      <div class="coins" id="saldo">0</div>
      <span>Monedas</span>
    </div>

    <div class="packages">
      <div class="pkg" onclick="confirmar(70)"><strong>70</strong><span>Monedas</span></div>
      <div class="pkg" onclick="confirmar(350)"><strong>350</strong><span>Monedas</span></div>
      <div class="pkg" onclick="confirmar(700)"><strong>700</strong><span>Monedas</span></div>
      <div class="pkg" onclick="confirmar(1400)"><strong>1400</strong><span>Monedas</span></div>
    </div>

    <div class="history">
      <h4>Historial</h4>
      <div id="hist"></div>
    </div>
  </div>
</div>

<script>
let historial = [];

function setAvatar(){
  const u = document.getElementById("user").value.trim();
  document.getElementById("avatar").innerText =
    u ? u.replace("@","")[0].toUpperCase() : "U";
}

function confirmar(cantidad){
  const o = document.createElement("div");
  o.className="overlay";
  o.innerHTML=`
    <div class="modal">
      <div>Confirmar compra</div>
      <strong style="font-size:22px">${cantidad} monedas</strong>
      <button class="confirm" onclick="procesar(${cantidad});this.closest('.overlay').remove()">Confirmar</button>
      <button class="cancel" onclick="this.closest('.overlay').remove()">Cancelar</button>
    </div>`;
  document.body.appendChild(o);
}

function procesar(c){
  const saldoEl=document.getElementById("saldo");
  const original=saldoEl.innerText;
  saldoEl.innerText="…";

  setTimeout(()=>{
    saldoEl.innerText=parseInt(original)+c;

    const t=new Date().toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});
    historial.unshift({c,t});
    historial=historial.slice(0,5);
    renderHist();

    const ok=document.createElement("div");
    ok.className="overlay";
    ok.innerHTML=`
      <div class="modal">
        <div class="check">✓</div>
        <div>Pago confirmado</div>
      </div>`;
    document.body.appendChild(ok);

    setTimeout(()=>{
      ok.remove();
      saldoEl.innerText=original;
    },1200);
  },800);
}

function renderHist(){
  document.getElementById("hist").innerHTML=
    historial.map(h=>`<div class="item"><span>+${h.c}</span><span>${h.t}</span></div>`).join("");
}
</script>
</body>
</html>
