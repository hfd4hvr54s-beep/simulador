<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>TikTok Coins</title>

<style>
:root{
  --bg:#000;
  --card:#1c1c1e;
  --field:#2c2c2e;
  --pink:#ff0050;
  --text:#fff;
  --muted:#9b9b9b;
}
*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"SF Pro Text",sans-serif}
body{margin:0;background:var(--bg);color:var(--text);display:flex;justify-content:center}
.app{width:100%;max-width:420px;padding:16px}
.header{text-align:center;font-size:22px;font-weight:700;margin:10px 0 20px}
.card{background:var(--card);border-radius:22px;padding:18px}
.user{display:flex;gap:12px}
.avatar{width:48px;height:48px;border-radius:50%;background:var(--field);display:flex;align-items:center;justify-content:center;font-weight:700}
.user input{flex:1;background:var(--field);border:none;border-radius:14px;color:#fff;padding:14px;font-size:16px}

.balance{text-align:center;margin:24px 0}
.balance .coins{font-size:40px;font-weight:800}

.packages{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.pkg{background:var(--field);border-radius:18px;padding:16px;text-align:center;cursor:pointer}
.pkg:active{transform:scale(.96)}

.overlay{position:fixed;inset:0;background:rgba(0,0,0,.4);display:flex;align-items:center;justify-content:center}
.modal{background:var(--card);border-radius:22px;padding:22px;width:260px;text-align:center;animation:up .3s}
@keyframes up{from{transform:translateY(40px);opacity:0}to{transform:none;opacity:1}}

.btn{width:100%;padding:14px;border:none;border-radius:14px;font-size:16px;font-weight:600;margin-top:10px}
.confirm{background:var(--pink);color:#fff}
.cancel{background:var(--field);color:#fff}

.check{width:90px;height:90px;border-radius:50%;background:var(--pink);margin:0 auto 12px;
display:flex;align-items:center;justify-content:center;font-size:44px}
</style>
</head>

<body>
<div class="app">
  <div class="header">TikTok</div>

  <div class="card">
    <div class="user">
      <div class="avatar" id="avatar">U</div>
      <input id="user" placeholder="@usuario" oninput="avatar.textContent=this.value[1]?.toUpperCase()||'U'">
    </div>

    <div class="balance">
      <div class="coins" id="saldo">0</div>
      <div style="color:var(--muted)">Monedas</div>
    </div>

    <div class="packages">
      <div class="pkg" onclick="comprar(70)">70 Monedas</div>
      <div class="pkg" onclick="comprar(350)">350 Monedas</div>
      <div class="pkg" onclick="comprar(700)">700 Monedas</div>
      <div class="pkg" onclick="comprar(1400)">1400 Monedas</div>
    </div>
  </div>
</div>

<script>
let saldo = 0;
let paquetePendiente = 0;

function comprar(c){
  paquetePendiente = c;
  mostrarConfirmacion(c);
}

function mostrarConfirmacion(c){
  const o=document.createElement("div");
  o.className="overlay";
  o.innerHTML=`
    <div class="modal">
      <div style="margin-bottom:6px">Confirmar compra</div>
      <strong style="font-size:22px">${c} monedas</strong>
      <button class="btn confirm" onclick="irATikTok()">Continuar</button>
      <button class="btn cancel" onclick="o.remove()">Cancelar</button>
    </div>`;
  document.body.appendChild(o);
}

function irATikTok(){
  localStorage.setItem("pendingCoins", paquetePendiente);
  window.location.href = "https://www.tiktok.com/coin";
}

window.addEventListener("focus", ()=>{
  const p = localStorage.getItem("pendingCoins");
  if(p){
    localStorage.removeItem("pendingCoins");
    confirmarCompra(Number(p));
  }
});

function confirmarCompra(c){
  saldo += c;
  document.getElementById("saldo").textContent = saldo;

  const o=document.createElement("div");
  o.className="overlay";
  o.innerHTML=`
    <div class="modal">
      <div class="check">âœ“</div>
      <div>Compra confirmada</div>
    </div>`;
  document.body.appendChild(o);
  setTimeout(()=>o.remove(),1200);
}
</script>
</body>
</html>
