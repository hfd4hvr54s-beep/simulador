<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>TikTok</title>

<style>
:root{
  --bg:#0f0f0f;
  --card:#1c1c1e;
  --pink:#ff0050;
  --text:#fff;
  --muted:#9b9b9b;
}

*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto}
body{
  margin:0;
  background:black;
  color:var(--text);
  display:flex;
  justify-content:center;
  padding-top:env(safe-area-inset-top);
  padding-bottom:env(safe-area-inset-bottom);
}

/* FONDO TIPO VIDEO */
.video-bg{
  position:fixed;inset:0;
  background:linear-gradient(180deg,#141414,#000);
  animation:bgmove 10s infinite alternate;
  z-index:-1;
}
@keyframes bgmove{
  from{filter:brightness(.9)}
  to{filter:brightness(1.1)}
}

.app{
  width:100%;
  max-width:420px;
  min-height:100vh;
  padding:16px;
}

/* HEADER */
.header{
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
  font-size:22px;
  margin:6px 0 14px;
}

/* CARD */
.card{
  background:var(--card);
  border-radius:20px;
  padding:18px;
}

/* USER */
.user{display:flex;align-items:center;gap:12px}
.avatar{
  width:48px;height:48px;border-radius:50%;
  background:#333;display:flex;align-items:center;justify-content:center;
  font-weight:800;font-size:18px;text-transform:uppercase;
}
.user input{
  flex:1;background:#2a2a2c;border:none;color:white;
  padding:12px;border-radius:12px;font-size:15px
}

/* BALANCE */
.balance{text-align:center;margin:22px 0}
.balance .coins{font-size:38px;font-weight:900}
.balance span{color:var(--muted);font-size:14px}

/* PACKAGES */
.packages{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.pkg{
  background:#2a2a2c;border-radius:16px;padding:14px;
  text-align:center;cursor:pointer;transition:.15s
}
.pkg:active{transform:scale(.96)}
.pkg strong{display:block;font-size:18px}
.pkg span{color:var(--muted);font-size:13px}

/* HISTORY */
.history{
  margin-top:18px;
  border-top:1px solid #2a2a2c;
  padding-top:12px;
}
.history h4{
  margin:0 0 8px;font-size:14px;color:var(--muted)
}
.item{
  display:flex;justify-content:space-between;
  font-size:14px;padding:6px 0
}

/* CONFIRM */
.confirm{
  position:fixed;inset:0;background:rgba(0,0,0,.65);
  display:flex;align-items:center;justify-content:center;
  animation:fade .25s
}
.paybox{
  background:#1c1c1e;border-radius:22px;
  padding:28px;text-align:center;width:260px
}
.check{
  width:92px;height:92px;border-radius:50%;
  background:var(--pink);margin:0 auto 14px;
  display:flex;align-items:center;justify-content:center;
  font-size:44px;font-weight:900
}
@keyframes fade{from{opacity:0}to{opacity:1}}

/* CLEAN MODE */
.clean .history,
.clean .packages,
.clean .user input{
  display:none
}
.clean .balance{margin-top:60px}
.toggle{
  margin-top:14px;
  text-align:center;
  color:var(--muted);
  font-size:13px;
  cursor:pointer;
}
</style>
</head>

<body>
<div class="video-bg"></div>

<div class="app" id="app">
  <div class="header">TikTok</div>

  <div class="card">
    <div class="user">
      <div class="avatar" id="avatar">U</div>
      <input id="user" placeholder="@usuario" oninput="setUser()">
    </div>

    <div class="balance">
      <div class="coins" id="saldo">0</div>
      <span>Monedas</span>
    </div>

    <div class="packages">
      <div class="pkg" onclick="recargar(70)"><strong>70</strong><span>Monedas</span></div>
      <div class="pkg" onclick="recargar(350)"><strong>350</strong><span>Monedas</span></div>
      <div class="pkg" onclick="recargar(700)"><strong>700</strong><span>Monedas</span></div>
      <div class="pkg" onclick="recargar(1400)"><strong>1400</strong><span>Monedas</span></div>
    </div>

    <div class="history">
      <h4>Historial</h4>
      <div id="hist"></div>
    </div>

    <div class="toggle" onclick="toggleClean()">Modo grabación</div>
  </div>
</div>

<script>
let usuario = localStorage.getItem("user") || "";
let saldo = 0;
let hist = [];

init();

function init(){
  document.getElementById("user").value = usuario;
  loadUser();
}

function setUser(){
  usuario = document.getElementById("user").value.trim();
  localStorage.setItem("user",usuario);
  loadUser();
}

function loadUser(){
  saldo = parseInt(localStorage.getItem("saldo_"+usuario) || "0");
  hist = JSON.parse(localStorage.getItem("hist_"+usuario) || "[]");
  updateAvatar(); updateSaldo(); drawHist();
}

function updateAvatar(){
  const a = document.getElementById("avatar");
  a.textContent = usuario ? usuario.replace("@","")[0] : "U";
}

function updateSaldo(){
  document.getElementById("saldo").innerText = saldo;
}

function drawHist(){
  const h = document.getElementById("hist");
  h.innerHTML = hist.map(i=>`
    <div class="item">
      <span>+${i.c}</span><span>${i.t}</span>
    </div>`).join("");
}

function recargar(c){
  saldo += c;
  const t = new Date().toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});
  hist.unshift({c,t});
  hist = hist.slice(0,6);

  localStorage.setItem("saldo_"+usuario,saldo);
  localStorage.setItem("hist_"+usuario,JSON.stringify(hist));

  updateSaldo(); drawHist();
  confirmAnim();
}

function confirmAnim(){
  const box = document.createElement("div");
  box.className="confirm";
  box.innerHTML=`
    <div class="paybox">
      <div class="check">✓</div>
      <div>Pago confirmado</div>
    </div>`;
  document.body.appendChild(box);
  setTimeout(()=>box.remove(),1200);
}

function toggleClean(){
  document.getElementById("app").classList.toggle("clean");
}
</script>
</body>
</html>
